<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Civiliza√ß√£o Clim√°tica</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/disasters.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Roboto+Slab:wght@400;700;900&display=swap"
        rel="stylesheet">
</head>

<body>
    <div id="scanline"></div>
    <div id="score-popup" class="hidden"></div>
    <div id="app">
        <!-- ROLE SELECTION -->
        <div id="role-screen" class="screen active">
            <h1 class="glitch" data-text="CLIMATE CIV ONLINE">CLIMATE CIV ONLINE</h1>
            <p>Escolha seu papel na gest√£o do futuro</p>
            <div class="role-buttons">
                <button id="teacher-role-btn" class="retro-btn">SOU PROFESSOR (Anfitri√£o)</button>
                <button id="player-role-btn" class="retro-btn">SOU JOGADOR</button>
            </div>
        </div>

        <!-- TEACHER LOGIN / SETUP -->
        <div id="teacher-setup-screen" class="screen hidden">
            <h1>SESS√ÉO DO PROFESSOR</h1>
            <div id="session-info" class="hidden">
                <p>C√ìDIGO DA SESS√ÉO:</p>
                <h2 id="session-code-display" class="glitch">----</h2>
                <p>Jogadores Conectados: <span id="player-count">0</span>/4</p>
                <ul id="connected-players-list"></ul>
                <button id="start-game-btn" class="retro-btn" disabled>INICIAR MISS√ÉO</button>
            </div>
            <button id="create-session-btn" class="retro-btn">CRIAR NOVA SESS√ÉO</button>
        </div>

        <!-- PLAYER JOIN -->
        <div id="player-join-screen" class="screen hidden">
            <h1>ENTRAR NA MISS√ÉO</h1>
            <div class="input-group">
                <input type="text" id="join-code-input" placeholder="C√ìDIGO (4 D√çGITOS)" maxlength="4">
                <input type="text" id="player-name-input" placeholder="SEU NOME" maxlength="12">
            </div>
            <button id="join-session-btn" class="retro-btn">CONECTAR</button>
            <p id="join-status"></p>
        </div>

        <!-- MAIN GAME SCREEN (TEACHER VIEW) -->
        <div id="teacher-game-screen" class="screen hidden">
            <div id="hud">
                <div id="players-dashboard">
                    <!-- Player cards injected by JS -->
                </div>
                <div class="round-info">
                    <span id="round-display">ANO: 2025</span>
                    <div id="timer-display">90s</div>
                </div>
            </div>

            <div id="scenario-container">
                <h2 id="scenario-text">Carregando cen√°rio...</h2>
                <div id="submission-status">
                    <p>Aguardando decis√µes dos jogadores...</p>
                    <div id="player-status-grid"></div>
                </div>
            </div>
        </div>

        <!-- PLAYER INTERACTION SCREEN -->
        <div id="player-game-screen" class="screen hidden">
            <div class="player-hud">
                <span id="player-status-name">JOGADOR</span>
                <div id="player-timer-display">90s</div>
            </div>
            <div id="resource-allocation-container">
                <h3>ALOCA√á√ÉO DE RECURSOS</h3>
                <p id="player-scenario-brief"></p>
                <div id="resource-pool">RECURSOS DISPON√çVEIS: <span id="remaining-resources">100</span></div>

                <div id="sliders-container">
                    <!-- 5 Sliders injected by JS -->
                </div>

                <button id="submit-allocation-btn" class="big-red-btn">CONFIRMAR DECIS√ÉO</button>
            </div>
            <div id="wait-message" class="hidden">
                <h2 class="glitch">DECIS√ÉO ENVIADA</h2>
                <p>Aguardando outros jogadores e an√°lise do sistema...</p>
            </div>
        </div>

        <!-- END SCREEN -->
        <div id="end-screen" class="screen hidden">
            <h1>RELAT√ìRIO FINAL</h1>
            <div id="final-results"></div>
            <button id="restart-btn" class="retro-btn">NOVA PARTIDA</button>
        </div>
    </div>

    <!-- Mute Button -->
    <div id="audio-controls" style="position: fixed; top: 10px; right: 10px; z-index: 1000;">
        <button id="mute-btn" class="retro-btn icon-btn">üîä</button>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>

    <script src="scripts/data.js"></script>
    <script src="scripts/firebase-config.js"></script>
    <script src="scripts/api.js"></script>
    <script src="scripts/AudioController.js"></script>
    <script src="scripts/game.js"></script>
</body>

</html>
<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Civilizaﾃｧﾃ｣o Climﾃ｡tica</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/disasters.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Roboto+Slab:wght@400;700;900&display=swap"
        rel="stylesheet">
</head>

<body>
    <div id="scanline"></div>
    <div id="score-popup" class="hidden"></div>
    <div id="app">
        <!-- ROLE SELECTION -->
        <div id="role-screen" class="screen active">
            <h1 class="glitch" data-text="CLIMATE CIV ONLINE">CLIMATE CIV ONLINE</h1>
            <p>Escolha seu papel na gestﾃ｣o do futuro</p>
            <div class="role-buttons">
                <button id="teacher-role-btn" class="retro-btn">SOU PROFESSOR (Anfitriﾃ｣o)</button>
                <button id="player-role-btn" class="retro-btn">SOU JOGADOR</button>
            </div>
        </div>

        <!-- TEACHER LOGIN / SETUP -->
        <div id="teacher-setup-screen" class="screen hidden">
            <h1>SESSﾃグ DO PROFESSOR</h1>
            <div id="session-info" class="hidden">
                <p>Cﾃ泥IGO DA SESSﾃグ:</p>
                <h2 id="session-code-display" class="glitch">----</h2>
                <p>Jogadores Conectados: <span id="player-count">0</span>/4</p>
                <ul id="connected-players-list"></ul>
                <button id="start-game-btn" class="retro-btn" disabled>INICIAR MISSﾃグ</button>
            </div>
            <button id="create-session-btn" class="retro-btn">CRIAR NOVA SESSﾃグ</button>
        </div>

        <!-- PLAYER JOIN -->
        <div id="player-join-screen" class="screen hidden">
            <h1>ENTRAR NA MISSﾃグ</h1>
            <div class="input-group">
                <input type="text" id="join-code-input" placeholder="Cﾃ泥IGO (4 Dﾃ宏ITOS)" maxlength="4">
                <input type="text" id="player-name-input" placeholder="SEU NOME" maxlength="12">
            </div>
            <button id="join-session-btn" class="retro-btn">CONECTAR</button>
            <p id="join-status"></p>
        </div>

        <!-- MAIN GAME SCREEN (TEACHER VIEW) -->
        <div id="teacher-game-screen" class="screen hidden">
            <div id="hud">
                <div id="players-dashboard">
                    <!-- Player cards injected by JS -->
                </div>
                <div class="round-info">
                    <span id="round-display">ANO: 2025</span>
                    <div id="timer-display">90s</div>
                </div>
            </div>

            <div id="scenario-container">
                <h2 id="scenario-text">Carregando cenﾃ｡rio...</h2>
                <div id="submission-status">
                    <p>Aguardando decisﾃｵes dos jogadores...</p>
                    <div id="player-status-grid"></div>
                </div>
            </div>
        </div>

        <!-- PLAYER INTERACTION SCREEN -->
        <div id="player-game-screen" class="screen hidden">
            <div class="player-hud">
                <span id="player-status-name">JOGADOR</span>
                <div id="player-timer-display">90s</div>
            </div>
            <div id="resource-allocation-container">
                <h3>ALOCAﾃﾃグ DE RECURSOS</h3>
                <p id="player-scenario-brief"></p>
                <div id="resource-pool">RECURSOS DISPONﾃ昂EIS: <span id="remaining-resources">100</span></div>

                <div id="sliders-container">
                    <!-- 5 Sliders injected by JS -->
                </div>

                <button id="submit-allocation-btn" class="big-red-btn">CONFIRMAR DECISﾃグ</button>
            </div>
            <div id="wait-message" class="hidden">
                <h2 class="glitch">DECISﾃグ ENVIADA</h2>
                <p>Aguardando outros jogadores e anﾃ｡lise do sistema...</p>
            </div>
        </div>

        <!-- END SCREEN -->
        <div id="end-screen" class="screen hidden">
            <h1>MISSIﾃグ CONCLUﾃ好A</h1>

            <!-- Teacher specific end view -->
            <div id="teacher-end-view" class="hidden">
                <div id="analytics-container">
                    <h2>ESTADO DA CIVILIZAﾃﾃグ</h2>
                    <div id="player-outcomes-grid">
                        <!-- Individual player cards with status injected by JS -->
                    </div>
                </div>
                <div id="restart-lobby">
                    <h3>PREPARAﾃﾃグ PARA NOVA MISSﾃグ</h3>
                    <div id="player-ready-grid"></div>
                    <button id="teacher-restart-btn" class="retro-btn" disabled>REINICIAR SISTEMAS</button>
                </div>
            </div>

            <!-- Player specific end view -->
            <div id="player-end-view" class="hidden">
                <div id="personal-rundown">
                    <h2>SEU DESEMPENHO</h2>
                    <div id="player-score-banner"></div>
                    <div id="scenario-history">
                        <!-- History items injected by JS -->
                    </div>
                </div>
                <button id="player-ready-btn" class="big-red-btn">QUERO JOGAR NOVAMENTE</button>
                <div id="player-ready-msg" class="hidden">
                    <p class="glitch">SINAL DE PRONTIDﾃグ ENVIADO</p>
                    <p>Aguardando o professor e outros lﾃｭderes...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Mute Button -->
    <div id="audio-controls" style="position: fixed; top: 10px; right: 10px; z-index: 1000;">
        <button id="mute-btn" class="retro-btn icon-btn">矧</button>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>

    <script src="scripts/data.js"></script>
    <script src="scripts/firebase-config.js"></script>
    <script src="scripts/api.js"></script>
    <script src="scripts/AudioController.js"></script>
    <script src="scripts/game.js"></script>
</body>

</html>